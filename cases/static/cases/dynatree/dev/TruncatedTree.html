<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <title>HPO Tree Test</title>

  <script src="../jquery/jquery.js" type="text/javascript"></script>
  <script src="../jquery/jquery-ui.custom.js" type="text/javascript"></script>
  <script src="../jquery/jquery.cookie.js" type="text/javascript"></script>
	<link href="../src/skin/stylesheet.css" rel="stylesheet" type="text/css">
  <link href="../src/skin/ui.dynatree.css" rel="stylesheet" type="text/css">
  <script src="../src/jquery.dynatree.js" type="text/javascript"></script>

  
  <script type="text/javascript">
   
  $(document).on("click", "#minus", function(event) {
 	$("#tree").dynatree("getTree").selectKey(this.parentElement.parentElement.id, false);
  
});
 
   $(function(){
    // Attach the dynatree widget to an existing <div id="tree"> element
    // and pass the tree options as an argument to the dynatree() function:
    $("#tree").dynatree({
	 checkbox: true,	  

   onSelect: function(flag, node){
			if (flag){	
			//adds node as a div to the selectedTerms  ul. Div has icon, term id, and weighting radio buttons. I'm kind of unhappy with how long importanceSelector's assignment is.
			var minusImage = "<img  class= minus id= minus src= \"minus.gif\"/> ";
			var importanceSelector = "<form action=\"\" class= radioForm><input  type=\"radio\" name=\"importance\" value=\"1\" class= radioButton><input type=\"radio\" name=\"importance\" value=\"2\" class= radioButton><input type=\"radio\" name=\"importance\" value=\"3\" class= radioButton><input type=\"radio\" name=\"importance\" value=\"4\" class= radioButton><input type=\"radio\" name=\"importance\" value=\"5\"></form>";
			$("#selectedTerms").append("<div class= selected id= " + node.data.key + " parent= " + node.data.parent + " parent_path= " + node.data.path + 
			
			" hpo_id= "+ node.data.hpo_id +">" 
			+ "<div class= selectedItemText>" + minusImage + node.data.title + "</div>" + importanceSelector + "</div>");
				
			} else {
				
				var targetItem = '#'.concat(node.data.key);
				$(targetItem).remove();
				
				
			}
		},
	
children: [{title:"All", key:"0", parent:"-1", path:"0", hpo_id:"HP_0000001", icon: false, 
children: [
     {title:"Onset and clinical course", key:"1", parent:"0", path:"0|1", hpo_id:"HP_0000004", icon: false, 
     children: [
          {title:"Onset", key:"2", parent:"1", path:"0|1|2", hpo_id:"HP_0003674", icon: false, 
          children: [
               {title:"Age of onset", key:"3", parent:"2", path:"0|1|2|3", hpo_id:"HP_0011007", icon: false, 
               children: [
                    {title:"Congenital onset", key:"4", parent:"3", path:"0|1|2|3|4", hpo_id:"HP_0003577", icon: false, 
                    children: [
                         {title:"Embryonal onset", key:"5", parent:"4", path:"0|1|2|3|4|5", hpo_id:"HP_0011460", icon: false},
                         {title:"Fetal onset", key:"6", parent:"4", path:"0|1|2|3|4|6", hpo_id:"HP_0011461", icon: false},
                    ]},
                    {title:"Adult onset", key:"7", parent:"3", path:"0|1|2|3|7", hpo_id:"HP_0003581", icon: false, 
                    children: [
                         {title:"Late onset", key:"8", parent:"7", path:"0|1|2|3|7|8", hpo_id:"HP_0003584", icon: false},
                         {title:"Middle age onset", key:"9", parent:"7", path:"0|1|2|3|7|9", hpo_id:"HP_0003596", icon: false},
                         {title:"Young adult onset", key:"10", parent:"7", path:"0|1|2|3|7|10", hpo_id:"HP_0011462", icon: false},
                    ]},
                    {title:"Infantile onset", key:"11", parent:"3", path:"0|1|2|3|11", hpo_id:"HP_0003593", icon: false},
                    {title:"Juvenile onset", key:"12", parent:"3", path:"0|1|2|3|12", hpo_id:"HP_0003621", icon: false},
                    {title:"Neonatal onset", key:"13", parent:"3", path:"0|1|2|3|13", hpo_id:"HP_0003623", icon: false},
                    {title:"Childhood onset", key:"14", parent:"3", path:"0|1|2|3|14", hpo_id:"HP_0011463", icon: false},
               ]},
               {title:"Speed of onset", key:"15", parent:"2", path:"0|1|2|15", hpo_id:"HP_0011008", icon: false, 
               children: [
                    {title:"Insidious onset", key:"16", parent:"15", path:"0|1|2|15|16", hpo_id:"HP_0003587", icon: false},
                    {title:"Acute", key:"17", parent:"15", path:"0|1|2|15|17", hpo_id:"HP_0011009", icon: false},
                    {title:"Chronic", key:"18", parent:"15", path:"0|1|2|15|18", hpo_id:"HP_0011010", icon: false},
                    {title:"Subacute", key:"19", parent:"15", path:"0|1|2|15|19", hpo_id:"HP_0011011", icon: false},
               ]}]}]}]}]});
  });

  </script>
</head>
<body class="example">
  <h1>HPO Tree Test Page</h1>
    <br>
  <p class="description">
    Please use the following tree to select terms that describe the patient's phenotype.
  </p>
 
	<div class = container>
		<div class = instructionDiv> 
			<div class = instructions> Please rate each term from 1 to 5, where 1 is least important to this case and 5 is case defining.  </div>
		</div>
		<br>
		<div  class = treeContainer id="tree"> </div>
		<!-- Container for selected term list with radio buttons -->
		<div class= selectedItemListContainer>
		<div class= legend> 1&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 3&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 5</div>
				<ul class= selectedTerms id="selectedTerms"></ul>
		</div>
	</div>

</body>
</html>